import sys

input = lambda: sys.stdin.readline().rstrip()

BLOCKS = [
    [(0, 0), (0, 1), (0, 2), (0, 3)],
    [(0, 0), (1, 0), (2, 0), (3, 0)],

    [(0, 0), (0, 1), (1, 0), (1, 1)],

    [(0, 0), (1, 0), (2, 0), (2, 1)],
    [(1, 0), (1, 1), (1, 2), (0, 2)],
    [(0, 0), (0, 1), (1, 1), (2, 1)],
    [(1, 0), (0, 0), (0, 1), (0, 2)],
    [(0, 1), (1, 1), (2, 1), (2, 0)],
    [(0, 0), (0, 1), (0, 2), (1, 2)],
    [(0, 1), (0, 0), (1, 0), (2, 0)],
    [(0, 0), (1, 0), (1, 1), (1, 2)],

    [(0, 0), (1, 0), (1, 1), (2, 1)],
    [(0, 1), (1, 1), (1, 0), (2, 0)],
    [(0, 0), (0, 1), (1, 1), (1, 2)],
    [(1, 0), (1, 1), (0, 1), (0, 2)],

    [(0, 0), (0, 1), (0, 2), (1, 1)],
    [(0, 0), (1, 0), (2, 0), (1, 1)],
    [(0, 1), (1, 0), (1, 1), (1, 2)],
    [(1, 0), (0, 1), (1, 1), (2, 1)],
]

N, M = map(int, input().split())
matrix = [list(map(int, input().split())) for _ in range(N)]

max_sum = 0

for y in range(N):
    for x in range(M):
        for block in BLOCKS:
            s = 0

            for dy, dx in block:
                by, bx = y + dy, x + dx

                if not (0 <= by < N and 0 <= bx < M):
                    s = -1
                    break

                s += matrix[by][bx]

            if s > max_sum:
                max_sum = s

print(max_sum)
